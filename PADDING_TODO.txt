TODO sketch for this branch, in rough priority order:

- Clean up/fix XXX's and FIXMEs
  - Tests for circuit getting marked or freed before callback.
  - Tests for detecting padding from wrong hop
  - Tests for machine replacement on all conditions
  - Tests for STATE_END teardown due to infinity, bins_empty, and/or length
    with pending timers, new machines, etc.
  - Test histogram spacing for larger length histograms
  - Better test coverage in general

- Negotiate errors are not remembered.. If there is a consensus desync,
  clients will keep trying machines that middles do not have..

- Specify an ordered preference list of padding machines

- Larger types?
  - Larger circpad_hist_token_t?
  - Larger circpad_delay_t?
  - Larger circpad_statenum_t?

- Nick's API doc
  - Consider how we'd use it.

- Vanguards compatibility for MiddleNodes (via changes to vanguards addon)

- Circuit RTT measurement will break on var_cell/EXTEND2 cells
  - Are there any heuristics we can use here?
    - If RELAY_EARLY is only for the first cell of an EXTEND2 series,
      we can use that. But the proposal currently says MAY, but not MUST
      for this behavior.

- Rephist timer stats
  - Is this a privacy risk? The adversary could create lots of circuits
    to find a layer2 vanguard.. Otherwise they will be spread across middles.

- Determine good hardcoded/example histograms

- Specify target circuit lifetime?

- Specify ports for machine??

- circpad_machine_validate() function to sanity-check histograms loaded from
  consensus/torrc (can also be used to help guide a GA).
  - Check bin construction
  - no type overflow (start_usec + range_sec, etc)
  - no conflicting state transitions (or overlap with cancel events)
  - no use of both histograms and iat_dist
  - at least two histogram bins
  - min_hop vs target_hop

- Support torrc load+serialization of state machines
  - ??

- Support consensus load+serialization of state machines
  - ??

======== 0.3.6 ========

- Come up with some good histograms for eg circuit setup fingerprinting,
  website fingerprinting, and vanguards usage.
- Experiment with run-length histograms and other histogram/distribution
  encoding methods.
